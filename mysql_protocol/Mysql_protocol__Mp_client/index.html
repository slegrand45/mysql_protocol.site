<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mysql_protocol__Mp_client (mysql_protocol.Mysql_protocol__Mp_client)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">mysql_protocol</a> &#x00BB; Mysql_protocol__Mp_client</nav><h1>Module <code>Mysql_protocol__Mp_client</code></h1><p>MySQL Protocol natively implements the MySQL client protocol (ie without any binding to C library).</p><p>License:</p><ul><li>The MySQL Protocol library uses the <a href="http://www.gnu.org/licenses/lgpl.html">LGPL license version 3</a>.</li></ul><p>External dependencies:</p><ul><li><a href="https://github.com/xguerin/bitstring/">Bitstring</a>.</li><li><a href="https://github.com/xavierleroy/cryptokit/">Cryptokit</a>.</li><li>optional: <a href="https://github.com/gildor478/ounit/">oUnit</a> (to run the tests suite).</li></ul><p>Tested configurations:</p><ul><li>MySQL 5.1.69 server (64 bits) - FreeBSD -stable.</li><li>MySQL 5.5.31 server (64 bits) - FreeBSD -stable.</li><li>MySQL 5.6.26 server (64 bits) - FreeBSD -stable.</li><li>MariaDB 10.5.6 server (64 bits) - FreeBSD -stable.</li></ul><p>The following functionalities are not implemented:</p><ul><li>Master/slave.</li><li>Long data packet.</li><li>Compression.</li><li>Encryption.</li></ul><p>Known limitations:</p><ul><li>On 32 bits platforms, the data retrieved from the server cannot exceed 16777211 bytes (the OCaml Sys.max_string_length value). So, for instance, you cannot retrieve a column with a binary BLOB data greater than this max size. And if you have a TEXT column encoded in UTF-8, as a character will take 3 to 4 bytes, you will only be able to retrieve between 16777211/3=5592403 and 16777211/4=4194302 characters. On 64 bits platforms, the limit is so high that this limitation can be ignored.</li></ul><p>Usage examples:</p><ul><li>See &quot;examples&quot; directory.</li></ul></header><dl><dt class="spec type" id="type-client_error"><a href="#type-client_error" class="anchor"></a><code><span class="keyword">type</span> client_error</code><code> = </code><code>{</code><table class="record"><tr id="type-client_error.client_error_errno" class="anchored"><td class="def field"><a href="#type-client_error.client_error_errno" class="anchor"></a><code>client_error_errno : int;</code></td><td class="doc"><p>error number</p></td></tr><tr id="type-client_error.client_error_sqlstate" class="anchored"><td class="def field"><a href="#type-client_error.client_error_sqlstate" class="anchor"></a><code>client_error_sqlstate : string;</code></td><td class="doc"><p>state</p></td></tr><tr id="type-client_error.client_error_message" class="anchored"><td class="def field"><a href="#type-client_error.client_error_message" class="anchor"></a><code>client_error_message : string;</code></td><td class="doc"><p>error message</p></td></tr></table><code>}</code></dt><dd><p>MySQL error.</p></dd></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> <a href="index.html#type-client_error">client_error</a></code></dt><dd><p>Raise if the MySQL server returns an error.</p></dd></dl><dl><dt class="spec exception" id="exception-Fetch_no_more_rows"><a href="#exception-Fetch_no_more_rows" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Fetch_no_more_rows</span></code></dt><dd><p>Raise if fetch is called and the server has no more rows to return.</p></dd></dl><dl><dt class="spec type" id="type-configuration"><a href="#type-configuration" class="anchor"></a><code><span class="keyword">type</span> configuration</code><code> = </code><code>{</code><table class="record"><tr id="type-configuration.sockaddr" class="anchored"><td class="def field"><a href="#type-configuration.sockaddr" class="anchor"></a><code>sockaddr : Unix.sockaddr;</code></td><td class="doc"><p>socket</p></td></tr><tr id="type-configuration.capabilities" class="anchored"><td class="def field"><a href="#type-configuration.capabilities" class="anchor"></a><code>capabilities : <span><a href="../Mysql_protocol/Mp_capabilities/index.html#type-capabilities">Mysql_protocol.Mp_capabilities.capabilities</a> list</span>;</code></td><td class="doc"><p>capabilities</p></td></tr><tr id="type-configuration.max_packet_size" class="anchored"><td class="def field"><a href="#type-configuration.max_packet_size" class="anchor"></a><code>max_packet_size : Stdlib.Int64.t;</code></td><td class="doc"><p>max packet size</p></td></tr><tr id="type-configuration.charset_number" class="anchored"><td class="def field"><a href="#type-configuration.charset_number" class="anchor"></a><code>charset_number : int;</code></td><td class="doc"><p>charset</p></td></tr><tr id="type-configuration.user" class="anchored"><td class="def field"><a href="#type-configuration.user" class="anchor"></a><code>user : string;</code></td><td class="doc"><p>login</p></td></tr><tr id="type-configuration.password" class="anchored"><td class="def field"><a href="#type-configuration.password" class="anchor"></a><code>password : string;</code></td><td class="doc"><p>password</p></td></tr><tr id="type-configuration.databasename" class="anchored"><td class="def field"><a href="#type-configuration.databasename" class="anchor"></a><code>databasename : string;</code></td><td class="doc"><p>database name (can be empty)</p></td></tr></table><code>}</code></dt><dd><p>Client configuration.</p></dd></dl><dl><dt class="spec type" id="type-connection"><a href="#type-connection" class="anchor"></a><code><span class="keyword">type</span> connection</code><code> = </code><code>{</code><table class="record"><tr id="type-connection.configuration" class="anchored"><td class="def field"><a href="#type-connection.configuration" class="anchor"></a><code>configuration : <a href="index.html#type-configuration">configuration</a>;</code></td><td class="doc"><p>configuration</p></td></tr><tr id="type-connection.channel" class="anchored"><td class="def field"><a href="#type-connection.channel" class="anchor"></a><code><span class="keyword">mutable</span> channel : <span><span>(Stdlib.in_channel * Stdlib.out_channel)</span> option</span>;</code></td><td class="doc"><p>channel between client and server</p></td></tr><tr id="type-connection.handshake" class="anchored"><td class="def field"><a href="#type-connection.handshake" class="anchor"></a><code><span class="keyword">mutable</span> handshake : <span><a href="../Mysql_protocol/Mp_handshake/index.html#type-handshake">Mysql_protocol.Mp_handshake.handshake</a> option</span>;</code></td><td class="doc"><p>handshake answer from the server</p></td></tr></table><code>}</code></dt><dd><p>Client connection.</p></dd></dl><dl><dt class="spec type" id="type-dml_dcl_result"><a href="#type-dml_dcl_result" class="anchor"></a><code><span class="keyword">type</span> dml_dcl_result</code><code> = </code><code>{</code><table class="record"><tr id="type-dml_dcl_result.affected_rows" class="anchored"><td class="def field"><a href="#type-dml_dcl_result.affected_rows" class="anchor"></a><code>affected_rows : Stdlib.Int64.t;</code></td><td class="doc"><p>number of affected rows</p></td></tr><tr id="type-dml_dcl_result.insert_id" class="anchored"><td class="def field"><a href="#type-dml_dcl_result.insert_id" class="anchor"></a><code>insert_id : Stdlib.Int64.t * Big_int.big_int;</code></td><td class="doc"><p>auto_increment id after an INSERT statement</p></td></tr><tr id="type-dml_dcl_result.server_status" class="anchored"><td class="def field"><a href="#type-dml_dcl_result.server_status" class="anchor"></a><code>server_status : int;</code></td><td class="doc"><p>status</p></td></tr><tr id="type-dml_dcl_result.warning_count" class="anchored"><td class="def field"><a href="#type-dml_dcl_result.warning_count" class="anchor"></a><code>warning_count : int;</code></td><td class="doc"><p>warning</p></td></tr><tr id="type-dml_dcl_result.message" class="anchored"><td class="def field"><a href="#type-dml_dcl_result.message" class="anchor"></a><code>message : string;</code></td><td class="doc"><p>warning message</p></td></tr></table><code>}</code></dt><dd><p>DML (Data Manipulation Language) and DCL (Data Control Language) result. Result of INSERT, UPDATE, GRANT... statements.</p><p>insert_id can be negative in two cases:</p><ul><li>the auto_increment value is indeed negative (SIGNED field).</li><li>the returned value overflows Int64 maximum (BIGINT UNSIGNED field).</li></ul><p>Unfortunately, the protocol gives no way to differentiate these two cases (see <a href="https://bugs.mysql.com/bug.php?id=69228">this bug report</a>). So we return two values:</p><ul><li>the first one is a Int64 and must be used when the auto_increment is <b>_not_</b> a BIGINT UNSIGNED field.</li><li>the second one is a Big_int and must be used when the auto_increment is a BIGINT UNSIGNED field.</li></ul></dd></dl><dl><dt class="spec type" id="type-prepare_result"><a href="#type-prepare_result" class="anchor"></a><code><span class="keyword">type</span> prepare_result</code><code> = </code><code>{</code><table class="record"><tr id="type-prepare_result.prepare_handler" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_handler" class="anchor"></a><code>prepare_handler : Stdlib.Int64.t;</code></td></tr><tr id="type-prepare_result.prepare_nb_columns" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_nb_columns" class="anchor"></a><code>prepare_nb_columns : int;</code></td></tr><tr id="type-prepare_result.prepare_nb_parameters" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_nb_parameters" class="anchor"></a><code>prepare_nb_parameters : int;</code></td></tr><tr id="type-prepare_result.prepare_warning_count" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_warning_count" class="anchor"></a><code>prepare_warning_count : int;</code></td></tr><tr id="type-prepare_result.prepare_parameters_fields" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_parameters_fields" class="anchor"></a><code>prepare_parameters_fields : <span><a href="../Mysql_protocol/Mp_field_packet/index.html#type-field_packet">Mysql_protocol.Mp_field_packet.field_packet</a> list</span>;</code></td></tr><tr id="type-prepare_result.prepare_parameters_names" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_parameters_names" class="anchor"></a><code>prepare_parameters_names : <span><a href="../Mysql_protocol/Mp_field/index.html#type-field_name">Mysql_protocol.Mp_field.field_name</a> list</span>;</code></td></tr><tr id="type-prepare_result.prepare_columns_fields" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_columns_fields" class="anchor"></a><code>prepare_columns_fields : <span><a href="../Mysql_protocol/Mp_field_packet/index.html#type-field_packet">Mysql_protocol.Mp_field_packet.field_packet</a> list</span>;</code></td></tr><tr id="type-prepare_result.prepare_columns_names" class="anchored"><td class="def field"><a href="#type-prepare_result.prepare_columns_names" class="anchor"></a><code>prepare_columns_names : <span><a href="../Mysql_protocol/Mp_field/index.html#type-field_name">Mysql_protocol.Mp_field.field_name</a> list</span>;</code></td></tr></table><code>}</code></dt><dd><p>Result for a prepare command.</p></dd></dl><dl><dt class="spec type" id="type-executable_statement"><a href="#type-executable_statement" class="anchor"></a><code><span class="keyword">type</span> executable_statement</code></dt><dt class="spec type" id="type-execute_result"><a href="#type-execute_result" class="anchor"></a><code><span class="keyword">type</span> execute_result</code></dt><dt class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><code><span class="keyword">type</span> result</code></dt></dl><dl><dt class="spec value" id="val-error_exception_to_string"><a href="#val-error_exception_to_string" class="anchor"></a><code><span class="keyword">val</span> error_exception_to_string : <a href="index.html#type-client_error">client_error</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert MySQL exception to string.</p></dd></dl><dl><dt class="spec value" id="val-dml_dcl_result_to_string"><a href="#val-dml_dcl_result_to_string" class="anchor"></a><code><span class="keyword">val</span> dml_dcl_result_to_string : <a href="index.html#type-dml_dcl_result">dml_dcl_result</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert DML (Data Manipulation Language) and DCL (Data Control Language) result to string.</p></dd></dl><dl><dt class="spec value" id="val-configuration"><a href="#val-configuration" class="anchor"></a><code><span class="keyword">val</span> configuration : <span>user:string</span> <span>&#45;&gt;</span> <span>password:string</span> <span>&#45;&gt;</span> <span>sockaddr:Unix.sockaddr</span> <span>&#45;&gt;</span> <span>?&#8288;databasename:string</span> <span>&#45;&gt;</span> <span>?&#8288;max_packet_size:Stdlib.Int64.t</span> <span>&#45;&gt;</span> <span>?&#8288;charset:<span>(<a href="../Mysql_protocol/Mp_charset/index.html#type-charset_name">Mysql_protocol.Mp_charset.charset_name</a> * <a href="../Mysql_protocol/Mp_charset/index.html#type-collation_name">Mysql_protocol.Mp_charset.collation_name</a>)</span></span> <span>&#45;&gt;</span> <span>?&#8288;capabilities:<span><a href="../Mysql_protocol/Mp_capabilities/index.html#type-capabilities">Mysql_protocol.Mp_capabilities.capabilities</a> list</span></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-configuration">configuration</a></code></dt><dd><p>Build client configuration.</p><dl><dt>parameter user</dt><dd><p>Login.</p></dd></dl><dl><dt>parameter password</dt><dd><p>Password.</p></dd></dl><dl><dt>parameter sockaddr</dt><dd><p>Socket for the connection to the server.</p></dd></dl><dl><dt>parameter databasename</dt><dd><p>Database name.</p></dd></dl><dl><dt>parameter max_packet_size</dt><dd><p>Max client/server packet size.</p></dd></dl><dl><dt>parameter charset</dt><dd><p>Charset and collation name.</p></dd></dl><dl><dt>parameter capabilities</dt><dd><p>Client capabilities.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-connect"><a href="#val-connect" class="anchor"></a><code><span class="keyword">val</span> connect : <span>configuration:<a href="index.html#type-configuration">configuration</a></span> <span>&#45;&gt;</span> <span>?&#8288;force:bool</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-connection">connection</a></code></dt><dd><p>Connection to the server.</p><dl><dt>parameter configuration</dt><dd><p>Client configuration.</p></dd></dl><dl><dt>parameter force</dt><dd><p>If true, the connection is immediately opened. Otherwise, the connection is opened only the first time it is needed.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-change_user"><a href="#val-change_user" class="anchor"></a><code><span class="keyword">val</span> change_user : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> <span>user:string</span> <span>&#45;&gt;</span> <span>password:string</span> <span>&#45;&gt;</span> <span>?&#8288;databasename:string</span> <span>&#45;&gt;</span> <span>?&#8288;charset:<span>(<a href="../Mysql_protocol/Mp_charset/index.html#type-charset_name">Mysql_protocol.Mp_charset.charset_name</a> * <a href="../Mysql_protocol/Mp_charset/index.html#type-collation_name">Mysql_protocol.Mp_charset.collation_name</a>)</span></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-configuration">configuration</a></code></dt><dd><p>Change user / databasename / charset</p><dl><dt>parameter connection</dt><dd><p>Connection.</p></dd></dl><dl><dt>parameter user</dt><dd><p>Login.</p></dd></dl><dl><dt>parameter password</dt><dd><p>Password.</p></dd></dl><dl><dt>parameter databasename</dt><dd><p>Database name.</p></dd></dl><dl><dt>parameter charset</dt><dd><p>Charset and collation name.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-reset_session"><a href="#val-reset_session" class="anchor"></a><code><span class="keyword">val</span> reset_session : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Reset the session : equivalent to a disconnect/reconnect with the same configuration.</p><dl><dt>parameter connection</dt><dd><p>Connection.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-reset_connection"><a href="#val-reset_connection" class="anchor"></a><code><span class="keyword">val</span> reset_connection : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Reset the connection without re-authentication. From <a href="https://mariadb.com/kb/en/com_reset_connection/">documentation</a>), this will:</p><ul><li>rollback any open transaction</li><li>reset transaction isolation level</li><li>reset session variables</li><li>delete user variables</li><li>remove temporary tables</li><li>remove all PREPARE statement</li></ul><p>Database will NOT be reset to initial value.</p><dl><dt>parameter connection</dt><dd><p>Connection.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-use_database"><a href="#val-use_database" class="anchor"></a><code><span class="keyword">val</span> use_database : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> <span>databasename:string</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Change current database.</p><dl><dt>parameter connection</dt><dd><p>Connection.</p></dd></dl><dl><dt>parameter databasename</dt><dd><p>Database name.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-ping"><a href="#val-ping" class="anchor"></a><code><span class="keyword">val</span> ping : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Send a PING to the server.</p><dl><dt>parameter connection</dt><dd><p>Connection.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-create_statement_from_string"><a href="#val-create_statement_from_string" class="anchor"></a><code><span class="keyword">val</span> create_statement_from_string : string <span>&#45;&gt;</span> <a href="index.html#type-executable_statement">executable_statement</a></code></dt><dd><p>Create a new statement from a SQL string.</p></dd></dl><dl><dt class="spec value" id="val-prepare"><a href="#val-prepare" class="anchor"></a><code><span class="keyword">val</span> prepare : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> <span>statement:<a href="index.html#type-executable_statement">executable_statement</a></span> <span>&#45;&gt;</span> <a href="index.html#type-executable_statement">executable_statement</a></code></dt><dd><p>Prepare a statement.</p><dl><dt>parameter connection</dt><dd><p>Connection.</p></dd></dl><dl><dt>parameter statement</dt><dd><p>Executable statement.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_created_statement"><a href="#val-get_created_statement" class="anchor"></a><code><span class="keyword">val</span> get_created_statement : <a href="index.html#type-executable_statement">executable_statement</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Extract the statement from an executable statement.</p></dd></dl><dl><dt class="spec value" id="val-get_prepared_statement"><a href="#val-get_prepared_statement" class="anchor"></a><code><span class="keyword">val</span> get_prepared_statement : <a href="index.html#type-executable_statement">executable_statement</a> <span>&#45;&gt;</span> string * <a href="index.html#type-prepare_result">prepare_result</a></code></dt><dd><p>Extract the prepared statement from an executable statement.</p></dd></dl><dl><dt class="spec value" id="val-execute"><a href="#val-execute" class="anchor"></a><code><span class="keyword">val</span> execute : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> <span>statement:<a href="index.html#type-executable_statement">executable_statement</a></span> <span>&#45;&gt;</span> <span>?&#8288;filter:<span><span>(<span><span>(string * int)</span> list</span> <span>&#45;&gt;</span> <span><a href="../Mysql_protocol/Mp_data/index.html#type-t">Mysql_protocol.Mp_data.t</a> list</span> <span>&#45;&gt;</span> bool)</span> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;iter:<span><span>(<span><span>(string * int)</span> list</span> <span>&#45;&gt;</span> <span><a href="../Mysql_protocol/Mp_data/index.html#type-t">Mysql_protocol.Mp_data.t</a> list</span> <span>&#45;&gt;</span> unit)</span> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;return_all_raw_mysql_data:bool</span> <span>&#45;&gt;</span> <span>?&#8288;params:<span><a href="../Mysql_protocol/Mp_data/index.html#type-t">Mysql_protocol.Mp_data.t</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;bind:<a href="../Mysql_protocol/Mp_execute/index.html#type-bind">Mysql_protocol.Mp_execute.bind</a></span> <span>&#45;&gt;</span> <span>?&#8288;flag:<a href="../Mysql_protocol/Mp_execute/index.html#type-flag">Mysql_protocol.Mp_execute.flag</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-execute_result">execute_result</a></code></dt><dd><p>Execute a statement (prepared or not prepared) and return the result.</p><dl><dt>parameter connection</dt><dd><p>Client connection.</p></dd></dl><dl><dt>parameter statement</dt><dd><p>Executable statement.</p></dd></dl><dl><dt>parameter filter</dt><dd><p>Optional function applied to each row of the result. If it returns true, the row is kept in the return result. Otherwise, the row is discarded from the result.</p></dd></dl><dl><dt>parameter iter</dt><dd><p>Optional function applied to each row of the result. If there is also a filter function, this filter is applied _before_ the iter function. So a row will be processed by the iter function only if this row has passed the filter function.</p></dd></dl><dl><dt>parameter return_all_raw_mysql_data</dt><dd><p>If true, the returned result will include MySQL raw data. It's useful if you need for instance to get the MySQL columns types and options. The default is false.</p></dd></dl><dl><dt>parameter params</dt><dd><p>List of params for prepared statement. Must be in the same order than in the prepared statement.</p></dd></dl><dl><dt>parameter bind</dt><dd><p>Specify if the params must be bound into the prepared statement. The default is to bind. A statement must be at least executed once with bind. After that, if you need to execute again the same statement with the same params, you can use No_bind.</p></dd></dl><dl><dt>parameter flag</dt><dd><p>Cursor options. To use fetch to get the statement results, you must specify the Cursor_type_read_only option.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_result"><a href="#val-get_result" class="anchor"></a><code><span class="keyword">val</span> get_result : <a href="index.html#type-execute_result">execute_result</a> <span>&#45;&gt;</span> <a href="index.html#type-result">result</a></code></dt><dd><p>Extract the result part from an executed result.</p></dd></dl><dl><dt class="spec value" id="val-get_result_multiple"><a href="#val-get_result_multiple" class="anchor"></a><code><span class="keyword">val</span> get_result_multiple : <a href="index.html#type-execute_result">execute_result</a> <span>&#45;&gt;</span> <span><a href="index.html#type-result">result</a> list</span></code></dt><dd><p>Extract the multiple part from an executed result (for CALL result).</p></dd></dl><dl><dt class="spec value" id="val-get_result_set"><a href="#val-get_result_set" class="anchor"></a><code><span class="keyword">val</span> get_result_set : <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> <a href="../Mysql_protocol/Mp_result_set_packet/index.html#type-result_select">Mysql_protocol.Mp_result_set_packet.result_select</a></code></dt><dd><p>Extract the set part from a result (for SELECT result).</p></dd></dl><dl><dt class="spec value" id="val-get_result_ok"><a href="#val-get_result_ok" class="anchor"></a><code><span class="keyword">val</span> get_result_ok : <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> <a href="index.html#type-dml_dcl_result">dml_dcl_result</a></code></dt><dd><p>Extract the ok part from a result (for INSERT, UPDATE, GRANT... result).</p></dd></dl><dl><dt class="spec value" id="val-fetch"><a href="#val-fetch" class="anchor"></a><code><span class="keyword">val</span> fetch : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> <span>statement:<a href="index.html#type-execute_result">execute_result</a></span> <span>&#45;&gt;</span> <span>?&#8288;nb_rows:int64</span> <span>&#45;&gt;</span> <span>?&#8288;filter:<span><span>(<span><span>(string * int)</span> list</span> <span>&#45;&gt;</span> <span><a href="../Mysql_protocol/Mp_data/index.html#type-t">Mysql_protocol.Mp_data.t</a> list</span> <span>&#45;&gt;</span> bool)</span> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;iter:<span><span>(<span><span>(string * int)</span> list</span> <span>&#45;&gt;</span> <span><a href="../Mysql_protocol/Mp_data/index.html#type-t">Mysql_protocol.Mp_data.t</a> list</span> <span>&#45;&gt;</span> unit)</span> option</span></span> <span>&#45;&gt;</span> <span>?&#8288;return_all_raw_mysql_data:bool</span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-result">result</a></code></dt><dd><p>Fetch row(s) from an executed result. It must be a prepared statement executed with a cursor.</p><dl><dt>parameter connection</dt><dd><p>Client connection.</p></dd></dl><dl><dt>parameter statement</dt><dd><p>Executable statement.</p></dd></dl><dl><dt>parameter nb_rows</dt><dd><p>Number of row(s) to fetch. Default is 1.</p></dd></dl><dl><dt>parameter filter</dt><dd><p>Optional function applied to each fetched rows. If it returns true, the row is kept. Otherwise, the row is discarded.</p></dd></dl><dl><dt>parameter iter</dt><dd><p>Optional function applied to each fetched rows. If there is also a filter function, this filter is applied _before_ the iter function. So a row will be processed by the iter function only if this row has passed the filter function.</p></dd></dl><dl><dt>parameter return_all_raw_mysql_data</dt><dd><p>If true, the fetch will include MySQL raw data. It's useful if you need for instance to get the MySQL columns types and options. The default is false.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_fetch_result_set"><a href="#val-get_fetch_result_set" class="anchor"></a><code><span class="keyword">val</span> get_fetch_result_set : <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> <a href="../Mysql_protocol/Mp_result_set_packet/index.html#type-result_select">Mysql_protocol.Mp_result_set_packet.result_select</a></code></dt><dd><p>Extract the set part from a fetch.</p></dd></dl><dl><dt class="spec value" id="val-close_statement"><a href="#val-close_statement" class="anchor"></a><code><span class="keyword">val</span> close_statement : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> <span>statement:<a href="index.html#type-executable_statement">executable_statement</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Close and destroy the prepared statement. It will be unusable.</p><dl><dt>parameter connection</dt><dd><p>Client connection.</p></dd></dl><dl><dt>parameter statement</dt><dd><p>Executable statement.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-disconnect"><a href="#val-disconnect" class="anchor"></a><code><span class="keyword">val</span> disconnect : <span>connection:<a href="index.html#type-connection">connection</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Close the connection to the server.</p><dl><dt>parameter connection</dt><dd><p>Client connection.</p></dd></dl></dd></dl></div></body></html>